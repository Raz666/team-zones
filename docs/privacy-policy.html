<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Privacy Policy - Team Zones</title>
    <style>
      html,
      body {
        margin: 0;
        padding: 0;
        height: 100%;
        width: 100%;
        background: #0b132b;
      }
      #policy-frame {
        width: 100%;
        height: 100%;
        border: 0;
        display: block;
      }
    </style>
  </head>
  <body>
    <iframe id="policy-frame" title="Privacy Policy"></iframe>
    <script>
      (function () {
        const storageKey = 'tz:policy-lang';
        const supported = ['en', 'pl', 'ja'];

        function normalizeLang(value) {
          if (!value) return null;
          const normalized = value.toLowerCase().split('-')[0];
          return supported.indexOf(normalized) >= 0 ? normalized : null;
        }

        function getStoredLang() {
          try {
            return normalizeLang(localStorage.getItem(storageKey));
          } catch (e) {
            return null;
          }
        }

        function getBrowserLang() {
          const languages = Array.isArray(navigator.languages)
            ? navigator.languages
            : [navigator.language];
          for (const lang of languages) {
            const normalized = normalizeLang(lang);
            if (normalized) {
              return normalized;
            }
          }
          return null;
        }

        const stored = getStoredLang();
        const preferred = stored || getBrowserLang() || 'en';

        if (!stored && preferred) {
          try {
            localStorage.setItem(storageKey, preferred);
          } catch (e) {}
        }

        const frame = document.getElementById('policy-frame');
        if (frame) {
          frame.src = `privacy-policy.${preferred}.html?showLang=1`;
        }
      })();
    </script>
  </body>
</html>
